
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.8em;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .difficulty-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .basic { background: #48bb78; color: white; }
        .intermediate { background: #ed8936; color: white; }
        .advanced { background: #e53e3e; color: white; }

        .question {
            background: #f7fafc;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 0 10px 10px 0;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .question-number {
            font-weight: bold;
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .code-block::before {
            content: 'bash';
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 0.8em;
            color: #a0aec0;
        }

        .missing-line {
            background: #fed7d7;
            color: #c53030;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .task {
            background: #e6fffa;
            border: 2px solid #38b2ac;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .task h4 {
            color: #2c7a7b;
            margin-bottom: 10px;
        }

        .task ul {
            margin-left: 20px;
        }

        .task li {
            margin-bottom: 5px;
        }

        .command-section {
            background: #faf5ff;
            border: 2px solid #9f7aea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .command-section h4 {
            color: #553c9a;
            margin-bottom: 10px;
        }

        .command {
            background: #2d3748;
            color: #68d391;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 5px 0;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid #e2e8f0;
            color: #718096;
        }

        .instructions {
            background: #fff5f5;
            border: 2px solid #fc8181;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 10px;
        }

        .instructions h3 {
            color: #c53030;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bash Scripting Homework Assignment</h1>
        
        <div class="instructions">
            <h3>Instructions</h3>
            <p>Complete the missing lines in each bash script, explain what the code does, and provide the commands to run each script. Focus on understanding variables, conditionals, loops, and file operations.</p>
        </div>

        <!-- BASIC LEVEL QUESTIONS -->
        <div class="section">
            <h2 class="section-title">
                <span class="difficulty-badge basic">Basic Level</span>
                Questions 1-10
            </h2>

            <div class="question">
                <div class="question-number">Question 1:</div>
                <div class="code-block">#!/bin/bash
# Simple variable assignment and output
name="John Doe"
age=25
echo "Name: $name"
<span class="missing-line"># MISSING LINE: Print the age variable</span></div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Fill in the missing line to print the age</li>
                        <li>Explain what this script does</li>
                        <li>Write the commands to make this script executable and run it</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 2:</div>
                <div class="code-block">#!/bin/bash
# Check if a file exists
filename="config.txt"
<span class="missing-line"># MISSING LINE: if statement to check if file exists</span>
    echo "File $filename exists"
else
    echo "File $filename does not exist"
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the if statement using the correct file test operator</li>
                        <li>Explain what file test operator you used and why</li>
                        <li>Show how to run this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 3:</div>
                <div class="code-block">#!/bin/bash
# Simple for loop counting
echo "Counting from 1 to 5:"
<span class="missing-line"># MISSING LINE: for loop using brace expansion {1..5}</span>
    echo "Number: $i"
done</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Write the correct for loop syntax</li>
                        <li>Explain what brace expansion does</li>
                        <li>Show the command to execute this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 4:</div>
                <div class="code-block">#!/bin/bash
# Basic arithmetic
num1=10
num2=5
<span class="missing-line"># MISSING LINE: Calculate sum using $((...))</span>
echo "Sum: $sum"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the arithmetic expansion to calculate sum</li>
                        <li>Explain how arithmetic expansion works in bash</li>
                        <li>Provide the run command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 5:</div>
                <div class="code-block">#!/bin/bash
# Using command line arguments
echo "Script name: $0"
<span class="missing-line"># MISSING LINE: Print the first command line argument</span>
echo "Number of arguments: $#"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the line to print the first argument</li>
                        <li>Explain what $0, $1, and $# represent</li>
                        <li>Show how to run this script with arguments</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 6:</div>
                <div class="code-block">#!/bin/bash
# String comparison
user_input="admin"
<span class="missing-line"># MISSING LINE: if statement comparing user_input with "admin"</span>
    echo "Welcome administrator!"
else
    echo "Access denied"
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Write the if statement for string equality</li>
                        <li>Explain why quotes are important in string comparisons</li>
                        <li>Show the execution command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 7:</div>
                <div class="code-block">#!/bin/bash
# Creating a simple array
fruits=("apple" "banana" "orange")
echo "First fruit: ${fruits[0]}"
<span class="missing-line"># MISSING LINE: Print all fruits in the array</span></div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the line to print all array elements</li>
                        <li>Explain array syntax in bash</li>
                        <li>Show the run command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 8:</div>
                <div class="code-block">#!/bin/bash
# While loop with counter
counter=1
<span class="missing-line"># MISSING LINE: while loop condition (counter <= 3)</span>
    echo "Counter: $counter"
    counter=$((counter + 1))
done</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the while loop condition</li>
                        <li>Explain how while loops work</li>
                        <li>Provide the execution command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 9:</div>
                <div class="code-block">#!/bin/bash
# Check if directory exists and create it
dir_name="logs"
<span class="missing-line"># MISSING LINE: if statement to check if directory does NOT exist</span>
    echo "Creating directory: $dir_name"
    mkdir "$dir_name"
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Write the condition to check if directory doesn't exist</li>
                        <li>Explain the NOT operator and directory test</li>
                        <li>Show how to run this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 10:</div>
                <div class="code-block">#!/bin/bash
# Simple case statement
choice="start"
case $choice in
    start)
        echo "Starting service..."
        ;;
<span class="missing-line">    # MISSING LINE: case for "stop"</span>
        echo "Stopping service..."
        ;;
    *)
        echo "Unknown option"
        ;;
esac</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the "stop" case</li>
                        <li>Explain how case statements work</li>
                        <li>Show the run command</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- INTERMEDIATE LEVEL QUESTIONS -->
        <div class="section">
            <h2 class="section-title">
                <span class="difficulty-badge intermediate">Intermediate Level</span>
                Questions 11-20
            </h2>

            <div class="question">
                <div class="question-number">Question 11:</div>
                <div class="code-block">#!/bin/bash
# Function definition and usage
calculate_area() {
    local length=$1
    local width=$2
<span class="missing-line">    # MISSING LINE: calculate area and return/echo it</span>
}

result=$(calculate_area 5 3)
echo "Area: $result"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the function to calculate and return the area</li>
                        <li>Explain how functions work in bash and what 'local' does</li>
                        <li>Show how to run this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 12:</div>
                <div class="code-block">#!/bin/bash
# Reading user input
echo "Enter your name: "
<span class="missing-line"># MISSING LINE: read user input into variable 'username'</span>
if [ -z "$username" ]; then
    echo "No name provided"
else
    echo "Hello, $username!"
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the read command to get user input</li>
                        <li>Explain what the -z test operator does</li>
                        <li>Show the execution command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 13:</div>
                <div class="code-block">#!/bin/bash
# Processing command output
log_file="/var/log/syslog"
if [ -r "$log_file" ]; then
<span class="missing-line">    # MISSING LINE: count lines containing "error" (case insensitive)</span>
    echo "Found $error_count error entries"
else
    echo "Cannot read log file"
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Use grep and wc to count error lines</li>
                        <li>Explain the pipeline and command substitution</li>
                        <li>Show how to run this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 14:</div>
                <div class="code-block">#!/bin/bash
# Loop through files in directory
for file in /etc/*.conf; do
<span class="missing-line">    # MISSING LINE: check if it's a regular file</span>
        echo "Processing: $file"
        lines=$(wc -l < "$file")
        echo "  Lines: $lines"
    fi
done</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the condition to check if it's a regular file</li>
                        <li>Explain why this check is necessary</li>
                        <li>Show the run command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 15:</div>
                <div class="code-block">#!/bin/bash
# Error handling with exit codes
backup_file="/backup/important.tar.gz"
<span class="missing-line"># MISSING LINE: check if backup exists AND is readable</span>
    echo "Backup verified successfully"
    exit 0
else
    echo "Backup verification failed"
    exit 1
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Write the condition using AND operator</li>
                        <li>Explain exit codes and their importance</li>
                        <li>Show how to run and check exit code</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 16:</div>
                <div class="code-block">#!/bin/bash
# Using getopts for argument parsing
verbose=false
output_file=""

<span class="missing-line"># MISSING LINE: getopts loop to handle -v and -o options</span>
    case $opt in
        v)
            verbose=true
            ;;
        o)
            output_file=$OPTARG
            ;;
        \?)
            echo "Invalid option: -$OPTARG"
            exit 1
            ;;
    esac
done

echo "Verbose: $verbose"
echo "Output file: $output_file"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the getopts while loop</li>
                        <li>Explain how getopts works and what OPTARG is</li>
                        <li>Show how to run with options: -v -o filename.txt</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 17:</div>
                <div class="code-block">#!/bin/bash
# Array processing with loop
servers=("web1" "web2" "db1" "cache1")
failed_servers=()

for server in "${servers[@]}"; do
    # Simulate ping check (replace with actual ping)
    if (( RANDOM % 2 )); then
        echo "$server: OK"
    else
        echo "$server: FAILED"
<span class="missing-line">        # MISSING LINE: add failed server to failed_servers array</span>
    fi
done

echo "Failed servers: ${failed_servers[@]}"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the failed server to the array</li>
                        <li>Explain how to append to arrays in bash</li>
                        <li>Show the execution command</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 18:</div>
                <div class="code-block">#!/bin/bash
# File processing with error handling
input_file=$1
output_file=$2

if [ $# -ne 2 ]; then
    echo "Usage: $0 <input_file> <output_file>"
    exit 1
fi

<span class="missing-line"># MISSING LINE: check if input file exists and is readable</span>
    echo "Error: Cannot read input file: $input_file"
    exit 1
fi

# Process file (convert to uppercase)
tr '[:lower:]' '[:upper:]' < "$input_file" > "$output_file"
echo "File processed successfully"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the condition to validate input file</li>
                        <li>Explain the tr command and redirection</li>
                        <li>Show how to run with two arguments</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 19:</div>
                <div class="code-block">#!/bin/bash
# Monitoring script with thresholds
cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
threshold=80

<span class="missing-line"># MISSING LINE: compare cpu_usage with threshold using arithmetic comparison</span>
    echo "ALERT: CPU usage is ${cpu_usage}% (threshold: ${threshold}%)"
    # Send notification
    echo "High CPU usage detected" | mail -s "CPU Alert" admin@company.com
else
    echo "CPU usage normal: ${cpu_usage}%"
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Write the numeric comparison condition</li>
                        <li>Explain the command pipeline used to get CPU usage</li>
                        <li>Show how to run this monitoring script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 20:</div>
                <div class="code-block">#!/bin/bash
# Configuration file parser
config_file="app.conf"
declare -A config

<span class="missing-line"># MISSING LINE: read configuration file line by line</span>
    # Skip empty lines and comments
    [[ $line =~ ^[[:space:]]*$ ]] && continue
    [[ $line =~ ^[[:space:]]*# ]] && continue
    
    # Parse key=value pairs
    if [[ $line =~ ^([^=]+)=(.*)$ ]]; then
        key="${BASH_REMATCH[1]}"
        value="${BASH_REMATCH[2]}"
        config["$key"]="$value"
    fi
done < "$config_file"

echo "Database: ${config[database]}"
echo "Port: ${config[port]}"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the while read loop to process the file</li>
                        <li>Explain associative arrays and regex matching</li>
                        <li>Show how to run this script</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ADVANCED LEVEL QUESTIONS -->
        <div class="section">
            <h2 class="section-title">
                <span class="difficulty-badge advanced">Advanced Level</span>
                Questions 21-30
            </h2>

            <div class="question">
                <div class="question-number">Question 21:</div>
                <div class="code-block">#!/bin/bash
# Advanced process management
service_name="nginx"
max_attempts=5
attempt=1

<span class="missing-line"># MISSING LINE: until loop checking if service is running</span>
    echo "Attempt $attempt: Starting $service_name..."
    systemctl start "$service_name" 2>/dev/null
    
    if [ $attempt -eq $max_attempts ]; then
        echo "Failed to start $service_name after $max_attempts attempts"
        exit 1
    fi
    
    ((attempt++))
    sleep 2
done

echo "$service_name is now running"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the until loop condition</li>
                        <li>Explain the difference between until and while loops</li>
                        <li>Show how to run this script with sudo privileges</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 22:</div>
                <div class="code-block">#!/bin/bash
# Signal handling and cleanup
cleanup() {
    echo "Cleaning up..."
    kill $background_pid 2>/dev/null
    rm -f "$temp_file"
    exit 0
}

<span class="missing-line"># MISSING LINE: set up signal traps for cleanup</span>

temp_file=$(mktemp)
echo "Temporary file: $temp_file"

# Start background process
sleep 300 &
background_pid=$!

echo "Background process PID: $background_pid"
echo "Press Ctrl+C to test cleanup"

wait $background_pid</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add trap commands for SIGINT and SIGTERM</li>
                        <li>Explain signal handling and why cleanup is important</li>
                        <li>Show how to run and test this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 23:</div>
                <div class="code-block">#!/bin/bash
# Advanced file synchronization
source_dir="/data/source"
backup_dir="/backup/$(date +%Y%m%d)"
log_file="/var/log/backup.log"

log_message() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$log_file"
}

<span class="missing-line"># MISSING LINE: create backup directory with parent directories</span>

log_message "Starting backup from $source_dir to $backup_dir"

# Use rsync for efficient copying
if rsync -av --delete "$source_dir/" "$backup_dir/"; then
    log_message "Backup completed successfully"
    
    # Create checksum file
    find "$backup_dir" -type f -exec md5sum {} \; > "$backup_dir/checksums.md5"
    log_message "Checksums created"
else
    log_message "ERROR: Backup failed"
    exit 1
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the mkdir command with appropriate options</li>
                        <li>Explain rsync options and the checksum verification process</li>
                        <li>Show how to run this backup script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 24:</div>
                <div class="code-block">#!/bin/bash
# Database backup with compression and encryption
db_name="production_db"
backup_dir="/secure/backups"
encryption_key="/etc/backup.key"

# Function to check prerequisites  
check_prerequisites() {
    local missing_tools=()
    
<span class="missing-line">    # MISSING LINE: check if required commands exist (pg_dump, gzip, gpg)</span>
        missing_tools+=("$tool")
    done
    
    if [ ${#missing_tools[@]} -gt 0 ]; then
        echo "Missing required tools: ${missing_tools[*]}"
        exit 1
    fi
}

timestamp=$(date +%Y%m%d_%H%M%S)
backup_file="$backup_dir/${db_name}_${timestamp}.sql.gz.gpg"

check_prerequisites
mkdir -p "$backup_dir"

# Create encrypted compressed backup
pg_dump "$db_name" | gzip | gpg --cipher-algo AES256 --compress-algo 1 --symmetric --armor --batch --passphrase-file "$encryption_key" > "$backup_file"

echo "Encrypted backup created: $backup_file"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the tool availability check using 'command -v'</li>
                        <li>Explain the backup pipeline and encryption process</li>
                        <li>Show how to run this script and verify the backup</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 25:</div>
                <div class="code-block">#!/bin/bash
# System health monitoring with JSON output
declare -A metrics
collect_metrics() {
    metrics[timestamp]=$(date -u +%Y-%m-%dT%H:%M:%SZ)
    metrics[cpu_usage]=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
    metrics[memory_usage]=$(free | grep '^Mem:' | awk '{printf "%.1f", $3/$2 * 100.0}')
    metrics[disk_usage]=$(df / | tail -1 | awk '{print $5}' | cut -d'%' -f1)
    metrics[load_average]=$(uptime | awk -F'load average:' '{print $2}' | awk '{print $1}' | tr -d ',')
}

output_json() {
    echo "{"
<span class="missing-line">    # MISSING LINE: loop through metrics array and output JSON format</span>
        echo "  \"$key\": \"$value\","
    done | sed '$ s/,$//'  # Remove trailing comma from last line
    echo "}"
}

collect_metrics
output_json</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the for loop to iterate through the associative array</li>
                        <li>Explain JSON formatting and associative array iteration</li>
                        <li>Show how to run and redirect output to a JSON file</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 26:</div>
                <div class="code-block">#!/bin/bash
# Advanced log analysis with parallel processing
log_dir="/var/log"
pattern="ERROR"
output_file="error_summary.txt"

analyze_log() {
    local logfile=$1
    local temp_file=$(mktemp)
    
    if [[ $logfile =~ \.gz$ ]]; then
        zcat "$logfile" | grep -i "$pattern" > "$temp_file"
    else
        grep -i "$pattern" "$logfile" > "$temp_file"
    fi
    
    local count=$(wc -l < "$temp_file")
    echo "$(basename "$logfile"): $count errors" >> "$output_file"
    rm -f "$temp_file"
}

# Find all log files and process in parallel
export -f analyze_log
export pattern output_file

<span class="missing-line"># MISSING LINE: find log files and process them in parallel using xargs</span>

echo "Analysis complete. Results in $output_file"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Complete the find command with xargs for parallel processing</li>
                        <li>Explain parallel processing with xargs -P option</li>
                        <li>Show how to run this script and monitor progress</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 27:</div>
                <div class="code-block">#!/bin/bash
# Advanced deployment with rollback capability
app_name="myapp"
deploy_dir="/opt/$app_name"
versions_dir="/opt/$app_name/versions"
current_link="/opt/$app_name/current"
new_version=$1

deploy_version() {
    local version=$1
    local version_dir="$versions_dir/$version"
    
    echo "Deploying version $version..."
    
    # Download and extract (simulated)
    mkdir -p "$version_dir"
    echo "version=$version" > "$version_dir/version.txt"
    echo "deployed=$(date)" > "$version_dir/deployed.txt"
    
<span class="missing-line">    # MISSING LINE: create/update symlink atomically</span>
    
    echo "Version $version deployed successfully"
}

rollback() {
    local previous_version=$(ls -1t "$versions_dir" | sed -n '2p')
    
    if [ -n "$previous_version" ]; then
        echo "Rolling back to version: $previous_version"
        ln -sfn "$versions_dir/$previous_version" "$current_link"
        echo "Rollback completed"
    else
        echo "No previous version found for rollback"
        exit 1
    fi
}

# Health check function
health_check() {
    # Simulate health check
    sleep 2
    if (( RANDOM % 10 > 7 )); then
        return 1  # Fail 20% of the time for demo
    else
        return 0  # Success
    fi
}

if [ $# -ne 1 ]; then
    echo "Usage: $0 <version>"
    exit 1
fi

mkdir -p "$versions_dir"

# Deploy new version
deploy_version "$new_version"

# Perform health check
echo "Performing health check..."
if health_check; then
    echo "Health check passed"
else
    echo "Health check failed - rolling back"
    rollback
    exit 1
fi

echo "Deployment completed successfully"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the atomic symlink creation command</li>
                        <li>Explain atomic deployments and rollback strategies</li>
                        <li>Show how to run this deployment script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 28:</div>
                <div class="code-block">#!/bin/bash
# Network security scanner
target_network="192.168.1.0/24"
open_ports=(22 80 443 3306 5432)
results_file="scan_results_$(date +%Y%m%d_%H%M%S).txt"

scan_host() {
    local host=$1
    local host_results=()
    
    # Check if host is alive
    if ping -c 1 -W 1 "$host" >/dev/null 2>&1; then
        echo "Scanning $host..."
        
<span class="missing-line">        # MISSING LINE: loop through ports and check if they're open</span>
            if nc -z -w1 "$host" "$port" 2>/dev/null; then
                host_results+=("$port:open")
            else
                host_results+=("$port:closed")
            fi
        done
        
        if [ ${#host_results[@]} -gt 0 ]; then
            echo "$host: ${host_results[*]}" >> "$results_file"
        fi
    fi
}

# Extract network range and scan
network_base=$(echo "$target_network" | cut -d'/' -f1 | cut -d'.' -f1-3)

for i in {1..254}; do
    host="$network_base.$i"
    scan_host "$host" &
    
    # Limit concurrent processes
    if (( i % 20 == 0 )); then
        wait
    fi
done

wait  # Wait for all background processes
echo "Scan completed. Results in $results_file"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Add the for loop to iterate through the ports array</li>
                        <li>Explain network scanning and concurrent processing</li>
                        <li>Show how to run this script safely and legally</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 29:</div>
                <div class="code-block">#!/bin/bash
# Advanced configuration management
config_template="app.conf.template"
config_output="app.conf"
env_file=".env"

# Load environment variables from file
load_env() {
    if [ -f "$env_file" ]; then
<span class="missing-line">        # MISSING LINE: source the environment file safely</span>
    else
        echo "Warning: Environment file $env_file not found"
    fi
}

# Template processing function
process_template() {
    local template=$1
    local output=$2
    
    # Read template and substitute variables
    while IFS= read -r line; do
        # Use eval to expand variables in the line
        eval "echo \"$line\"" 
    done < "$template" > "$output"
}

# Validation function
validate_config() {
    local config_file=$1
    local required_keys=("DATABASE_URL" "API_KEY" "LOG_LEVEL")
    local missing_keys=()
    
    for key in "${required_keys[@]}"; do
        if ! grep -q "^$key=" "$config_file" 2>/dev/null; then
            missing_keys+=("$key")
        fi
    done
    
    if [ ${#missing_keys[@]} -gt 0 ]; then
        echo "ERROR: Missing required configuration keys: ${missing_keys[*]}"
        return 1
    fi
    
    return 0
}

# Main execution
if [ ! -f "$config_template" ]; then
    echo "Error: Template file $config_template not found"
    exit 1
fi

load_env
echo "Processing configuration template..."
process_template "$config_template" "$config_output"

if validate_config "$config_output"; then
    echo "Configuration generated successfully: $config_output"
    chmod 600 "$config_output"  # Secure permissions
else
    echo "Configuration validation failed"
    exit 1
fi</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Safely source the environment file (hint: use 'set -a' and 'set +a')</li>
                        <li>Explain template processing and configuration management</li>
                        <li>Show how to create template and env files to test this script</li>
                    </ul>
                </div>
            </div>

            <div class="question">
                <div class="question-number">Question 30:</div>
                <div class="code-block">#!/bin/bash
# Comprehensive system audit script
audit_report="system_audit_$(date +%Y%m%d_%H%M%S).json"
temp_dir=$(mktemp -d)

# Cleanup function
cleanup() {
    rm -rf "$temp_dir"
}
trap cleanup EXIT

# Collect system information
collect_system_info() {
    local info_file="$temp_dir/system.json"
    
    cat > "$info_file" << EOF
{
  "hostname": "$(hostname)",
  "kernel": "$(uname -r)",
  "os": "$(cat /etc/os-release | grep PRETTY_NAME | cut -d'=' -f2 | tr -d '\"')",
  "uptime": "$(uptime -p)",
  "users": $(who | wc -l),
  "processes": $(ps aux | wc -l)
}
EOF
}

# Security audit function
security_audit() {
    local security_file="$temp_dir/security.json"
    local issues=()
    
    # Check for common security issues
    [ -f /etc/passwd ] && grep '^root:' /etc/passwd >/dev/null || issues+=("no_root_user")
    [ -w /etc/passwd ] && issues+=("writable_passwd")
    find /home -name ".ssh/id_*" -not -path "*/.*" 2>/dev/null | grep -q . && issues+=("exposed_ssh_keys")
    
<span class="missing-line">    # MISSING LINE: convert issues array to JSON format</span>
    
    echo "$json_issues" > "$security_file"
}

# Generate final report
generate_report() {
    echo "{"
    echo '  "audit_timestamp": "'$(date -u +%Y-%m-%dT%H:%M:%SZ)'",'
    echo '  "system_info": '$(cat "$temp_dir/system.json")','
    echo '  "security_audit": '$(cat "$temp_dir/security.json")
    echo "}"
}

# Main execution
echo "Starting comprehensive system audit..."

collect_system_info
security_audit
generate_report > "$audit_report"

echo "System audit completed"
echo "Report saved to: $audit_report"
echo "Summary:"
jq '.security_audit | length' "$audit_report" | xargs -I {} echo "  Security issues found: {}"</div>
                <div class="task">
                    <h4>Your Tasks:</h4>
                    <ul>
                        <li>Convert the issues array to JSON format (hint: use printf and join)</li>
                        <li>Explain the complete audit process and JSON manipulation</li>
                        <li>Show how to run this script and interpret the results</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">General Instructions</h2>
            
            <div class="command-section">
                <h4>How to Complete This Assignment:</h4>
                <div class="command"># 1. Create a new script file</div>
                <div class="command">nano question1.sh</div>
                
                <div class="command"># 2. Copy the script code and fill in missing lines</div>
                
                <div class="command"># 3. Make the script executable</div>
                <div class="command">chmod +x question1.sh</div>
                
                <div class="command"># 4. Run the script</div>
                <div class="command">./question1.sh</div>
                
                <div class="command"># 5. For scripts with arguments:</div>
                <div class="command">./script.sh arg1 arg2</div>
                
                <div class="command"># 6. Check exit code</div>
                <div class="command">echo $?</div>
            </div>
            
            <div class="task">
                <h4>For Each Question, Provide:</h4>
                <ul>
                    <li><strong>Missing Line:</strong> The complete line that should replace the comment</li>
                    <li><strong>Explanation:</strong> What the script does and how the missing line fits</li>
                    <li><strong>Commands:</strong> How to make executable and run the script</li>
                    <li><strong>Expected Output:</strong> What you expect to see when running the script</li>
                </ul>
            </div>
            
            <div class="command-section">
                <h4>Debugging Tips:</h4>
                <div class="command"># Add debug output</div>
                <div class="command">bash -x script.sh</div>
                
                <div class="command"># Check syntax without running</div>
                <div class="command">bash -n script.sh</div>
                
                <div class="command"># Add set -x in script for debugging</div>
                <div class="command">set -x  # Enable debug mode</div>
                <div class="command">set +x  # Disable debug mode</div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Submission Guidelines:</strong></p>
            <p>Submit each completed script as a separate .sh file with your explanations in comments.</p>
            <p>Include a README.md file explaining your solutions and any challenges faced.</p>
            <p><strong>Due Date:</strong> As specified by your instructor</p>
            <p><strong>Good Luck!</strong> Remember: practice makes perfect in bash scripting.</p>
        </div>
    </div>
</body>
</html>